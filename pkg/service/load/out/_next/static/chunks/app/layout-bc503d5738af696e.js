(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{347:()=>{},1012:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,8346,23)),Promise.resolve().then(t.t.bind(t,347,23)),Promise.resolve().then(t.bind(t,3313)),Promise.resolve().then(t.bind(t,2597))},2597:(e,r,t)=>{"use strict";t.d(r,{default:()=>i});var o=t(2115);let a=async()=>{if("serviceWorker"in navigator)try{let e=await navigator.serviceWorker.register("/sw.js",{scope:"/"});console.log("Service Worker registered successfully:",e),e.addEventListener("updatefound",()=>{let r=e.installing;r&&r.addEventListener("statechange",()=>{"installed"===r.state&&navigator.serviceWorker.controller&&confirm("A new version of the app is available. Would you like to refresh?")&&(r.postMessage({type:"SKIP_WAITING"}),window.location.reload())})}),navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()})}catch(e){console.error("Service Worker registration failed:",e)}},n=async()=>{if("serviceWorker"in navigator)try{let e=await navigator.serviceWorker.getRegistration();e&&(await e.unregister(),sessionStorage.setItem("sw-unregistered",Date.now().toString()),console.log("Service Worker unregistered"),await s())}catch(e){console.error("Service Worker unregistration failed:",e)}},s=async()=>{if("caches"in window)try{let e=await caches.keys();await Promise.all(e.map(e=>(console.log("Clearing cache:",e),caches.delete(e)))),console.log("All caches cleared")}catch(e){console.error("Failed to clear caches:",e)}};function i(){return(0,o.useEffect)(()=>{if("serviceWorker"in navigator){let e=sessionStorage.getItem("sw-unregistered");e&&Date.now()-parseInt(e)>1e4&&sessionStorage.removeItem("sw-unregistered");let r=new URLSearchParams(window.location.search);if("true"===r.get("disable-sw")||"true"===localStorage.getItem("disable-sw")){console.log("\uD83D\uDEAB Service Worker disabled via parameter/localStorage"),n();return}{let e=r.get("dashboard");setTimeout(()=>{"true"!==localStorage.getItem("disable-sw")&&(console.log("âœ… Registering Service Worker for offline support"),a())},!(e&&(()=>{try{let r=localStorage.getItem("klt-dashboards");if(r)return JSON.parse(r).some(r=>r.id===e)}catch(e){console.error("Failed to check stored dashboards:",e)}return!1})())&&e?2e3:100)}}},[]),null}},3313:(e,r,t)=>{"use strict";t.d(r,{default:()=>n});var o=t(5155),a=t(2115);function n(){let[e,r]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{let e=()=>{r(navigator.onLine)};return r(navigator.onLine),window.addEventListener("online",e),window.addEventListener("offline",e),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",e)}},[]),e)?null:(0,o.jsx)("div",{className:"fixed top-0 left-0 right-0 bg-yellow-500 text-black text-center py-2 px-4 z-50",children:(0,o.jsx)("span",{className:"text-sm font-medium",children:"\uD83D\uDCE1 You're currently offline. The app is running from cache."})})}},8346:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_e8ce0c"}}},e=>{e.O(0,[838,441,964,358],()=>e(e.s=1012)),_N_E=e.O()}]);